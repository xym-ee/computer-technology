---
sort: 7
---
# (玩具)操作系统内核实现

我们已经了解并发编程实践需要的几乎全部内容——线程、内存模型、互斥、同步和并发 bugs 的应对。但我们一直是在简化的线程模型 (thread.h) 上讲解的。但我们还没有回答一个关键问题：线程到底在计算机硬件上是如何实现的？即便系统中只有一个处理器，我们依然可以创建很多并发执行的线程。


- 多处理器与中断
- 50行实现嵌入式操作系统

线程库是怎么实现的？操作系统内核里如何实现线程。

## 多处理器上的操作系统内核

AbstractMachine 的实验框架，使用 `am.h` 里的 api 可以直接使用 C 控制计算机硬件去控制一个操作系统内核。lab 的名字是 kernel，去实现一个小的 操作系统。

这一切的基础，Turing Machine，图灵机模型。一个有限状态机+一条纸带

计算机科学领域里有个非常重要的定理：图灵机的表达能力非常强，强到我们可以写一个图灵机的程序去模拟另外一个图灵机。

我们可以做一台图灵机，可以解释执行写在纸上的 C 程序，这些都是可以证明的。

(模拟器，指令的模拟执行)

 



