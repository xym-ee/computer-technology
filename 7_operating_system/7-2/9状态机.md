---
sort: 9
---
# 操作系统的状态机模型



## 软件和硬件的桥梁

自己写操作系统？

操作系统不过是个 C 语言程序。但是谁创建了这个状态机？

这个程序可以在没有操作系统的的硬件上运行吗？

两个问题
- 把一段代码加载到
- 提供一些类似 systemcall 的功能

Bare-metal 与程序员的约定。硬件和软件的约定。计算机硬件也是状态机，CPU reset 后，处理器处于一个确定的状态。

这个状态，厂商制造出来就是这样的。更具体地讲，x86 情况加，cs、ip的指针值，这些东西会写在手册里。CPU 是无情的执行指令的机器(计算机系统基础)。想要把硬件和软件连起来，就让 reset 后的 pc 可以读到一条有效的指令。即启动后执行的第一条指令。

看intel的手册
- 寄存器的初始状态
  - EIP = 0x0000fff0

x86 复位后，会处于一个 16bit 实模式。x86完全向前兼容。不像 ARM，v8的时候把v7全部扔了。

实际上这个行为是看得见的。

CPU 启动之后，ffff0，一般来讲这里是个跳转指令。状态机已经跑起来了。跑的还不是linux、windows。这时候要执行一些主板厂商的代码。








